import{G as d}from"./index-D6aPxdmY.js";class h{constructor(s,e=!1){this.name=s,this.required=e,this.validators=[],this.medicalChecks=[]}addValidator(s){return this.validators.push(s),this}addMedicalCheck(s){return this.medicalChecks.push(s),this}validate(s,e=null){const t=[];this.required&&!s&&s!==0&&t.push("This field is required");for(const r of this.validators){const i=r(s);i&&t.push(i)}for(const r of this.medicalChecks){const i=r(s,e);i&&t.push(i)}return t}toConfig(){return{required:this.required,validate:(s,e)=>this.validate(s,e)}}}class u extends h{constructor(s,e=!1,t=null,r=null){super(s,e),this.min=t,this.max=r,this.type="number",t!==null&&this.addValidator(i=>i!==""&&!isNaN(i)&&parseFloat(i)<t?`Value must be at least ${t}`:null),r!==null&&this.addValidator(i=>i!==""&&!isNaN(i)&&parseFloat(i)>r?`Value must be at most ${r}`:null)}toConfig(){return{...super.toConfig(),min:this.min,max:this.max,type:this.type}}}class C extends u{constructor(s,e,t){super(s,!0,t.min,t.max),this.biomarkerType=e,this.ranges=t,this.addMedicalCheck(r=>{const i=parseFloat(r);return isNaN(i)?null:e==="GFAP"&&i>t.critical?"Extremely high GFAP value - please verify lab result":null})}}class A extends u{constructor(s,e,t,r){super(s,!0,t,r),this.vitalType=e,this.addMedicalCheck((i,a)=>{const n=parseFloat(i);if(isNaN(n))return null;switch(e){case"SYSTOLIC_BP":if(a!=null&&a.diastolic_bp){const l=parseFloat(a.diastolic_bp);if(!isNaN(l)&&n<=l)return"Systolic BP must be higher than diastolic BP"}break;case"DIASTOLIC_BP":if(a!=null&&a.systolic_bp){const l=parseFloat(a.systolic_bp);if(!isNaN(l)&&n>=l)return"Diastolic BP must be lower than systolic BP"}break}return null})}}class I extends u{constructor(s){super(s,!0,0,120),this.addMedicalCheck(e=>{const t=parseFloat(e);return isNaN(t)?null:t<18?"Emergency stroke assessment typically for adults (â‰¥18 years)":null})}}class _ extends u{constructor(s,e,t,r){super(s,!0,t,r),this.scaleType=e,this.addMedicalCheck(i=>{const a=parseFloat(i);if(isNaN(a))return null;switch(e){case"GCS":if(a<8)return"GCS < 8 indicates severe consciousness impairment - consider coma module";break;case"FAST_ED":if(a>=4)return"High FAST-ED score suggests LVO - consider urgent intervention";break}return null})}}class S{static createRule(s,e,t={}){switch(s){case"AGE":return new I(e);case"BIOMARKER":if(t.biomarkerType==="GFAP")return new C(e,"GFAP",d);throw new Error(`Unsupported biomarker type: ${t.biomarkerType}`);case"VITAL_SIGN":return new A(e,t.vitalType,t.min,t.max);case"CLINICAL_SCALE":return new _(e,t.scaleType,t.min,t.max);case"NUMERIC":return new u(e,t.required,t.min,t.max);default:throw new Error(`Unsupported validation rule type: ${s}`)}}static createModuleValidation(s){const e={};switch(s){case"LIMITED":e.age_years=this.createRule("AGE","age_years").toConfig(),e.systolic_bp=this.createRule("VITAL_SIGN","systolic_bp",{vitalType:"SYSTOLIC_BP",min:60,max:300}).toConfig(),e.diastolic_bp=this.createRule("VITAL_SIGN","diastolic_bp",{vitalType:"DIASTOLIC_BP",min:30,max:200}).toConfig(),e.gfap_value=this.createRule("BIOMARKER","gfap_value",{biomarkerType:"GFAP"}).toConfig();break;case"FULL":Object.assign(e,this.createModuleValidation("LIMITED")),e.fast_ed_score=this.createRule("CLINICAL_SCALE","fast_ed_score",{scaleType:"FAST_ED",min:0,max:9}).toConfig();break;case"COMA":e.gfap_value=this.createRule("BIOMARKER","gfap_value",{biomarkerType:"GFAP"}).toConfig(),e.gcs=this.createRule("CLINICAL_SCALE","gcs",{scaleType:"GCS",min:3,max:15}).toConfig();break;default:throw new Error(`Unsupported module type: ${s}`)}return e}static validateModule(s,e){const t=this.createModuleValidation(e),r={};let i=!0;return Object.entries(t).forEach(([a,n])=>{const l=s[a],o=n.validate(l,s);o.length>0&&(r[a]=o,i=!1)}),{isValid:i,validationErrors:r}}}const E={AGE:"AGE",BIOMARKER:"BIOMARKER",VITAL_SIGN:"VITAL_SIGN",CLINICAL_SCALE:"CLINICAL_SCALE",NUMERIC:"NUMERIC"},L={GFAP:"GFAP"},f={SYSTOLIC_BP:"SYSTOLIC_BP",DIASTOLIC_BP:"DIASTOLIC_BP"},T={GCS:"GCS",FAST_ED:"FAST_ED"};export{L as BIOMARKER_TYPES,T as CLINICAL_SCALE_TYPES,S as MedicalValidationFactory,E as VALIDATION_RULE_TYPES,f as VITAL_SIGN_TYPES};
